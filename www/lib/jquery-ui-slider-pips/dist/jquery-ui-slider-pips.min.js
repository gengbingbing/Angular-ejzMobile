/*! jQuery-ui-Slider-Pips - v1.10.5 - 2015-07-05
* Copyright (c) 2015 Simon Goellner <simey.me@gmail.com>; Licensed MIT */
!function(a){"use strict";var b={pips:function(b){function c(b){var c,d,e,f,g,h=[],i=0;if(q&&q.length){for(e=k.element.slider("values"),f=a.map(e,function(a){return Math.abs(a-b)}),g=Math.min.apply(Math,f),c=0;c<f.length;c++)f[c]===g&&h.push(c);for(i=h[0],d=0;d<h.length;d++)k._lastChangedValue===h[d]&&(i=h[d])}return i}function d(b){if(!k.option("disabled")){var d=a(b).data("value"),e=c(d);q&&q.length?k.element.slider("values",e,d):k.element.slider("value",d),k._lastChangedValue=e}}function e(b){var c,d,e=b,g="ui-slider-pip",h="";"first"===b?e=0:"last"===b&&(e=r);var i=n+k.options.step*e,j=i.toString().replace(".","-");if(c="array"===a.type(t.labels)?t.labels[e]||"":"object"===a.type(t.labels)?"first"===b?t.labels.first||"":"last"===b?t.labels.last||"":"array"===a.type(t.labels.rest)?t.labels.rest[e-1]||"":i:i,"first"===b?(d="0%",g+=" ui-slider-pip-first",g+="label"===t.first?" ui-slider-pip-label":"",g+=!1===t.first?" ui-slider-pip-hide":""):"last"===b?(d="100%",g+=" ui-slider-pip-last",g+="label"===t.last?" ui-slider-pip-label":"",g+=!1===t.last?" ui-slider-pip-hide":""):(d=(100/r*b).toFixed(4)+"%",g+="label"===t.rest?" ui-slider-pip-label":"",g+=!1===t.rest?" ui-slider-pip-hide":""),g+=" ui-slider-pip-"+j,q&&q.length){for(f=0;f<q.length;f++)i===q[f]&&(g+=" ui-slider-pip-initial-"+(f+1),g+=" ui-slider-pip-selected-"+(f+1));k.options.range&&i>q[0]&&i<q[1]&&(g+=" ui-slider-pip-inrange")}else i===p&&(g+=" ui-slider-pip-initial",g+=" ui-slider-pip-selected"),k.options.range&&("min"===k.options.range&&p>i||"max"===k.options.range&&i>p)&&(g+=" ui-slider-pip-inrange");return h="horizontal"===k.options.orientation?"left: "+d:"bottom: "+d,'<span class="'+g+'" style="'+h+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+i+'">'+t.formatLabel(c)+"</span></span>"}var f,g,h,i,j,k=this,l="",m=a._data(k.element.get(0),"events").mousedown,n=k._valueMin(),o=k._valueMax(),p=k._value(),q=k._values(),r=(o-n)/k.options.step,s=k.element.find(".ui-slider-handle"),t={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:r>100?Math.floor(.05*r):1,formatLabel:function(a){return this.prefix+a+this.suffix}};a.extend(t,b),k.options.pipStep=t.step,k.element.addClass("ui-slider-pips").find(".ui-slider-pip").remove();var u={single:function(b){this.resetClasses(),j.filter(".ui-slider-pip-"+this.classLabel(b)).addClass("ui-slider-pip-selected"),k.options.range&&j.each(function(c,d){var e=a(d).children(".ui-slider-label").data("value");("min"===k.options.range&&b>e||"max"===k.options.range&&e>b)&&a(d).addClass("ui-slider-pip-inrange")})},range:function(b){for(this.resetClasses(),f=0;f<b.length;f++)j.filter(".ui-slider-pip-"+this.classLabel(b[f])).addClass("ui-slider-pip-selected-"+(f+1));k.options.range&&j.each(function(c,d){var e=a(d).children(".ui-slider-label").data("value");e>b[0]&&e<b[1]&&a(d).addClass("ui-slider-pip-inrange")})},classLabel:function(a){return a.toString().replace(".","-")},resetClasses:function(){var a=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;j.removeClass(function(b,c){return(c.match(a)||[]).join(" ")})}};for(k.options.pipStep=Math.round(k.options.pipStep),l+=e("first"),h=1;r>h;h++)h%k.options.pipStep===0&&(l+=e(h));for(l+=e("last"),k.element.append(l),j=k.element.find(".ui-slider-pip"),g=0;g<m.length;g++)"slider"===m[g].namespace&&(i=m[g].handler);k.element.off("mousedown.slider").on("mousedown.selectPip",function(b){var e=a(b.target),f=c(e.data("value")),g=s.eq(f);g.addClass("ui-state-active"),e.is(".ui-slider-label")?(d(e),k.element.one("mouseup.selectPip",function(){g.removeClass("ui-state-active").focus()})):i(b)}),k.element.on("slide.selectPip slidechange.selectPip",function(b,c){var d=a(this),e=d.slider("value"),f=d.slider("values");c&&(e=c.value,f=c.values),f&&f.length?u.range(f):u.single(e)})},"float":function(b){function c(b){var c=[],h=a.map(b,function(a){return Math.ceil((a-f)/e.options.step)});if("array"===a.type(l.labels))for(d=0;d<b.length;d++)c[d]=l.labels[h[d]]||b[d];else if("object"===a.type(l.labels))for(d=0;d<b.length;d++)c[d]=b[d]===f?l.labels.first||f:b[d]===g?l.labels.last||g:"array"===a.type(l.labels.rest)?l.labels.rest[h[d]-1]||b[d]:b[d];else for(d=0;d<b.length;d++)c[d]=b[d];return c}var d,e=this,f=e._valueMin(),g=e._valueMax(),h=e._value(),i=e._values(),j=[],k=e.element.find(".ui-slider-handle"),l={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(a){return this.prefix+a+this.suffix}};if(a.extend(l,b),f>h&&(h=f),h>g&&(h=g),i&&i.length)for(d=0;d<i.length;d++)i[d]<f&&(i[d]=f),i[d]>g&&(i[d]=g);if(e.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),l.handle)for(j=c(i&&i.length?i:[h]),d=0;d<j.length;d++)k.eq(d).append(a('<span class="ui-slider-tip">'+l.formatLabel(j[d])+"</span>"));l.pips&&e.element.find(".ui-slider-label").each(function(b,d){var e,f,g=a(d),h=[g.data("value")];e=l.formatLabel(c(h)[0]),f=a('<span class="ui-slider-tip-label">'+e+"</span>").insertAfter(g)}),"slide"!==l.event&&"slidechange"!==l.event&&"slide slidechange"!==l.event&&"slidechange slide"!==l.event&&(l.event="slidechange slide"),e.element.on(l.event,function(b,d){var e="array"===a.type(d.value)?d.value:[d.value],f=l.formatLabel(c(e)[0]);a(d.handle).find(".ui-slider-tip").html(f)})}};a.extend(!0,a.ui.slider.prototype,b)}(jQuery);